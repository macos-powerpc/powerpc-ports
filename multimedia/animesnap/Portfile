# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           python 1.0

name                animesnap
github.setup        YisusChrist AnimeSnap 9b259986538a763c6af30e34efd11754fa5e7b00
version             0.1.0
revision            1
categories-prepend  multimedia anime
platforms           any
license             MIT
maintainers         {@barracuda156 macos-powerpc.org:barracuda} \
                    openmaintainer
description         AnimeSnap helps you to identify the anime episode or even timestamp \
                    just from a screenshot of any scene from that episode
long_description    {*}${description}
checksums           rmd160  a9ab4ea8400351ece6bf106d2f8b704284e0cedf \
                    sha256  b68ff637a1c50384ac9c804c49e3bb994587461c8f28e7183de6447eaedbfb87 \
                    size    669386
github.tarball_from archive
supported_archs     noarch

# Prefer Qt4 where it works, but avoid on arm64 and non-Darwin:
if {${os.platform} eq "darwin" && ${configure.build_arch} in [list i386 ppc ppc64 x86_64]} {
    # Due to Qt4-related python deps.
    python.default_version  310

    depends_lib-append \
                    port:py${python.version}-pyqt4 \
                    port:py${python.version}-qt4py
} else {
    # Some dependencies do not have 3.13 subports yet.
    python.default_version  312

    depends_lib-append \
                    port:py${python.version}-pyqt5 \
                    port:py${python.version}-qtpy
}
python.pep517_backend       poetry

patchfiles          0001-Use-lower-case-module-name.patch

post-patch {
    system -W ${worksrcpath} "mv AnimeSnap animesnap"
}

depends_lib-append  port:py${python.version}-certifi \
                    port:py${python.version}-chardet \
                    port:py${python.version}-core-helpers \
                    port:py${python.version}-decorator \
                    port:py${python.version}-filetype \
                    port:py${python.version}-idna \
                    port:py${python.version}-packaging \
                    port:py${python.version}-qdarkstyle \
                    port:py${python.version}-requests \
                    port:py${python.version}-rich \
                    port:py${python.version}-setuptools \
                    port:py${python.version}-urllib3 \
                    port:py${python.version}-validators
