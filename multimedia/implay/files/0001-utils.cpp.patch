--- include/helpers/utils.h	2023-11-30 18:07:12.000000000 +0800
+++ include/helpers/utils.h	2026-01-08 18:03:16.000000000 +0800
@@ -21,7 +21,7 @@
   std::vector<std::string> paths;
 
   void parse(int argc, char** argv);
-  bool check(std::string key, std::string value);
+  bool checkOption(std::string key, std::string value);
 };
 
 inline float scaled(float n) { return n * ImGui::GetFontSize(); }

--- source/helpers/utils.cpp	2023-11-30 18:07:12.000000000 +0800
+++ source/helpers/utils.cpp	2026-01-08 18:02:31.000000000 +0800
@@ -10,8 +10,13 @@
 #include <shlobj.h>
 #elif defined(__APPLE__)
 #include <limits.h>
+#include <AvailabilityMacros.h>
+#if MAC_OS_X_VERSION_MIN_REQUIRED >= 101200
 #include <sysdir.h>
 #include <glob.h>
+#else
+#include <CoreServices/CoreServices.h>
+#endif
 #endif
 #include "helpers/utils.h"
 
@@ -56,7 +61,7 @@
   }
 }
 
-bool OptionParser::check(std::string key, std::string value) {
+bool OptionParser::checkOption(std::string key, std::string value) {
   auto it = options.find(key);
   return it != options.end() && it->second == value;
 }
@@ -107,6 +112,7 @@
     CoTaskMemFree(dir);
   }
 #elif defined(__APPLE__)
+#if MAC_OS_X_VERSION_MIN_REQUIRED >= 101200
   char path[PATH_MAX];
   auto state = sysdir_start_search_path_enumeration(SYSDIR_DIRECTORY_APPLICATION_SUPPORT, SYSDIR_DOMAIN_MASK_USER);
   while ((state = sysdir_get_next_search_path_enumeration(state, path)) != 0) {
@@ -118,6 +124,17 @@
     break;
   }
 #else
+  dataDir.clear();
+  FSRef ref;
+  OSStatus err = FSFindFolder(kUserDomain, kApplicationSupportFolderType, true, &ref);
+  if (err == noErr) {
+    char path[PATH_MAX];
+    if (FSRefMakePath(&ref, (UInt8*)path, sizeof(path))) {
+      dataDir = path;
+    }
+  }
+#endif
+#else
   char* home = getenv("HOME");
   char* xdg_dir = getenv("XDG_CONFIG_HOME");
   if (xdg_dir != nullptr)

--- source/main.cpp	2023-11-30 18:07:12.000000000 +0800
+++ source/main.cpp	2026-01-08 18:13:29.000000000 +0800
@@ -121,7 +121,7 @@
   }
 
   try {
-    if (parser.options.contains("o") || parser.check("video", "no") || parser.check("vid", "no"))
+    if (parser.options.contains("o") || parser.checkOption("video", "no") || parser.checkOption("vid", "no"))
       return run_headless(parser);
 
     ImPlay::Config config;
