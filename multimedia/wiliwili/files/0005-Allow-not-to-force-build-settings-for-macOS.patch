From 4f43bdb8e3f576c89551932e8e4716f09f621922 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Fri, 3 Oct 2025 02:57:50 +0800
Subject: [PATCH] Allow not to force build settings for macOS

---
 CMakeLists.txt | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git CMakeLists.txt CMakeLists.txt
index 09183651..ce05fd5c 100644
--- library/borealis/CMakeLists.txt
+++ library/borealis/CMakeLists.txt
@@ -7,11 +7,12 @@ include(${BOREALIS_LIBRARY}/cmake/commonOption.cmake)
 
 # Dependencies
 option(USE_SHARED_LIB "Whether to use shared libs provided by system" OFF)
+cmake_dependent_option(MAC_CUSTOM_BUILD "Allow specifying build config for macOS" OFF "APPLE;NOT PLATFORM_IOS" OFF)
 cmake_dependent_option(USE_SYSTEM_FMT "" OFF "NOT USE_SHARED_LIB" ON)
 cmake_dependent_option(USE_SYSTEM_TINYXML2 "" OFF "NOT USE_SHARED_LIB" ON)
 cmake_dependent_option(USE_SYSTEM_TWEENY "" OFF "NOT USE_SHARED_LIB" ON)
 
-if (APPLE AND PLATFORM_DESKTOP)
+if (APPLE AND PLATFORM_DESKTOP AND NOT MAC_CUSTOM_BUILD)
     option(BUNDLE_MACOS_APP "Bundle a app for macOS" OFF)
     set(CMAKE_OSX_ARCHITECTURES "arm64;x86_64" CACHE STRING "" FORCE)
     set(CMAKE_OSX_DEPLOYMENT_TARGET "10.15" CACHE STRING "" FORCE)
