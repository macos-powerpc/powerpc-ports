# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           cmake 1.1
PortGroup           github 1.0
PortGroup           qt4 1.0

github.setup        mhogomchungu sirikali 1.2.9
revision            0
categories          aqua fuse sysutils
license             GPL-3
maintainers         {@barracuda156 macos-powerpc.org:barracuda}
description         GUI front-end to sshfs, ecryptfs-simple, cryfs, gocryptfs, securefs, fscrypt and encfs
long_description    Qt/C++ {*}${description}.
homepage            https://mhogomchungu.github.io/sirikali
checksums           rmd160  3d0fa2eeb9541a0a6f8bbf72a46d6f82a164ca5f \
                    sha256  885641ad191acd6b41037102d7109a83979067ef971035dc862c9d6881f3a09a \
                    size    961024
github.tarball_from archive

installs_libs       no

post-extract {
    delete -f ${worksrcpath}/version
}

# changepassworddialog.cpp:32:10: fatal error: ui_changepassworddialog.h: No such file or directory
cmake.out_of_source no

patchfiles          patch-CMakeLists.txt

compiler.cxx_standard   2011

depends_build-append    port:nlohmann-json \
                        path:bin/pkg-config:pkgconfig
depends_lib-append      port:libgcrypt \
                        port:libpwquality \
                        port:libsecret

configure.args-append   -DINTERNAL_LXQT_WALLET=1 \
                        -DNOKDESUPPORT=1 \
                        -DNOSECRETSUPPORT=0 \
                        -DQT5=0

platform darwin {
    configure.args-append \
                        -DCMAKE_INSTALL_PREFIX=${applications_dir}
}

# lxqt_osx_keychain.cpp:158:52: error: invalid conversion from 'quint32*' {aka 'unsigned int*'} to 'UInt32*' {aka 'long unsigned int*'} [-fpermissive]
if {[string match *gcc* ${configure.compiler}]} {
    configure.cxxflags-append \
                    -fpermissive
}
