# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           meson 1.0

github.setup        msteinert bstring 1.0.1 v
revision            2
categories          textproc devel
license             BSD
maintainers         nomaintainer
description         Better String Library
long_description    {*}${description}
checksums           rmd160  9c54e5bf20d124279ed35a283a7079b7ef726c4f \
                    sha256  f876fcf5e8fab22faef1ae363bccc8381e7049a5b897452e82ed871c092fdb31 \
                    size    112479
github.tarball_from archive

# cc1: error: unrecognized command line option "-Wno-gnu"
# https://github.com/msteinert/bstring/issues/43
patchfiles-append   patch-meson.build.diff

# Both needed only to build tests:
depends_build-append \
                    port:check \
                    path:bin/pkg-config:pkgconfig

configure.args-append \
                    -Denable-docs=false \
                    -Denable-tests=true

# bstest.c:2758: error: ‘for’ loop initial declaration used outside C99 mode
# https://github.com/msteinert/bstring/issues/45
configure.cflags-append \
                    -std=c99

test.run            yes
