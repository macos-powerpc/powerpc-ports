--- src/telemetry/ProcessStats.cc	2025-08-19 02:02:15.000000000 +0800
+++ src/telemetry/ProcessStats.cc	2025-08-20 14:30:32.000000000 +0800
@@ -19,6 +19,7 @@
 
     // Fetch memory usage.
     {
+#ifdef MACH_TASK_BASIC_INFO
         mach_task_basic_info info;
         mach_msg_type_number_t count = MACH_TASK_BASIC_INFO_COUNT;
         if ( task_info(mach_task_self(), MACH_TASK_BASIC_INFO, reinterpret_cast<task_info_t>(&info), &count) ==
@@ -26,6 +27,15 @@
             result.rss = static_cast<int64_t>(info.resident_size);
             result.vms = static_cast<int64_t>(info.virtual_size);
         }
+#else
+        task_basic_info info;
+        mach_msg_type_number_t count = TASK_BASIC_INFO_COUNT;
+        if ( task_info(mach_task_self(), TASK_BASIC_INFO, reinterpret_cast<task_info_t>(&info), &count) ==
+             KERN_SUCCESS ) {
+            result.rss = static_cast<int64_t>(info.resident_size);
+            result.vms = static_cast<int64_t>(info.virtual_size);
+        }
+#endif
     }
     // Fetch CPU time.
     {
