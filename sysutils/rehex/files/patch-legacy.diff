From 0fb071e58ae4274387672a4eb0a9930ae4ca3eb4 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Sun, 18 Jan 2026 07:22:31 +0800
Subject: [PATCH] AppMac.mm: undefine  to avoid conflict with Apple headers

---
 src/AppMac.mm | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/AppMac.mm b/src/AppMac.mm
index dae8aacb..74e4137b 100644
--- src/AppMac.mm
+++ src/AppMac.mm
@@ -26,6 +26,10 @@
 #undef isset /* I guess they took the comment above to heart. */
 #endif
 
+#ifdef check
+#undef check
+#endif
+
 #include "App.hpp"
 
 #if !wxCHECK_VERSION(3,1,3)

From c7c38c4d5310a9e5b1ca5a199081e797c5515b9d Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Sun, 18 Jan 2026 07:32:13 +0800
Subject: [PATCH] MacFileName.mm: add missing constants on < 10.7

---
 src/MacFileName.mm | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/src/MacFileName.mm b/src/MacFileName.mm
index 42a30761..7d7a665a 100644
--- src/MacFileName.mm
+++ src/MacFileName.mm
@@ -19,6 +19,14 @@
 
 #include "MacFileName.hpp"
 
+#ifndef NSURLBookmarkResolutionWithSecurityScope
+#define NSURLBookmarkResolutionWithSecurityScope (1 << 10)
+#endif
+
+#ifndef NSURLBookmarkCreationWithSecurityScope
+#define NSURLBookmarkCreationWithSecurityScope (1 << 11)
+#endif
+
 REHex::MacFileName::MacFileName():
 	m_url(nil) {}
 
From df5866d6c4fc9355b55b82f5e13f9e03a437a27c Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Sun, 18 Jan 2026 08:21:57 +0800
Subject: [PATCH] MacFileName.mm: no base64EncodedStringWithOptions before 10.9

Ref: https://developer.apple.com/documentation/foundation/nsdata/base64encodedstring(options:)?language=objc
---
 src/MacFileName.mm | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/MacFileName.mm b/src/MacFileName.mm
index 7d7a665a..7778c714 100644
--- src/MacFileName.mm
+++ src/MacFileName.mm
@@ -134,7 +134,11 @@
 	
 	if(bookmark != nil)
 	{
+#if MAC_OS_X_VERSION_MAX_ALLOWED >= 1090
 		NSString *base64 = [bookmark base64EncodedStringWithOptions:0];
+#else
+		NSString *base64 = [bookmark base64Encoding];
+#endif
 		return [base64 cStringUsingEncoding:[NSString defaultCStringEncoding]];
 	}
 	else{
