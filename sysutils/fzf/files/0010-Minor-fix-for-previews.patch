From c7487df05b74b2abaf1ef7a0bdf441a60026c81c Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Thu, 12 Feb 2026 10:24:40 +0800
Subject: [PATCH] Minor fix for previews

---
 fzf.ml | 13 +++----------
 1 file changed, 3 insertions(+), 10 deletions(-)

diff --git fzf.ml fzf.ml
index f832482..821bf0e 100644
--- fzf.ml
+++ fzf.ml
@@ -116,17 +116,10 @@ let widget t screen =
   in
   let preview_lines =
     if has_preview then
-      (* Clean preview text - remove ANSI codes and control chars that might cause artifacts *)
-      let clean_text =
-        preview_text
-        |> String.filter ~f:(fun c ->
-            let code = Char.to_int c in
-            code >= 32 || code = 10) (* Keep printable + newline *)
-      in
-      let lines = String.split_lines clean_text in
-      List.take lines (item_count - 2) (* Leave some padding *)
+      let lines = String.split_lines preview_text in
+      List.take lines item_count
       |> List.map ~f:(fun line ->
-        let truncated = if String.length line > preview_width then String.prefix line (preview_width - 1) ^ "â€¦" else line in
+        let truncated = if String.length line > preview_width then String.prefix line preview_width else line in
         Widget.text truncated)
     else []
   in
