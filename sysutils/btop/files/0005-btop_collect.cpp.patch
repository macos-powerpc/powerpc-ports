From d2e99589ba72f656fffb6ddabedc8d930e68a4fe Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Tue, 30 Dec 2025 00:15:09 +0800
Subject: [PATCH] btop_collect.cpp: fix regression from a switch to
 kIOMainPortDefault

Fix breakage from https://github.com/aristocratos/btop/commit/85f4f0ec503a24db724300bbea0524ce4d15e795
---
 src/osx/btop_collect.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/osx/btop_collect.cpp b/src/osx/btop_collect.cpp
index 0e3cab568..ebd61d41c 100644
--- src/osx/btop_collect.cpp
+++ src/osx/btop_collect.cpp
@@ -65,6 +65,10 @@ tab-size = 4
 #endif
 #include "smc.hpp"
 
+#if __MAC_OS_X_VERSION_MIN_REQUIRED < 120000
+#define kIOMainPortDefault kIOMasterPortDefault
+#endif
+
 using std::clamp, std::string_literals::operator""s, std::cmp_equal, std::cmp_less, std::cmp_greater;
 using std::ifstream, std::numeric_limits, std::streamsize, std::round, std::max, std::min;
 namespace fs = std::filesystem;
