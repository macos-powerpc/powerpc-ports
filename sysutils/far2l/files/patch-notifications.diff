From d968bd05b4943e79ba11d54561cb8bb5aa06309e Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <barracuda@macos-powerpc.org>
Date: Wed, 17 Sep 2025 20:50:23 +0800
Subject: [PATCH] displaynotify.mm: add a fallback to fix build on < 10.8

---
 WinPort/src/Backend/WX/Mac/displaynotify.mm | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

diff --git a/WinPort/src/Backend/WX/Mac/displaynotify.mm b/WinPort/src/Backend/WX/Mac/displaynotify.mm
index 82679a2bfc..99ef3723ba 100644
--- WinPort/src/Backend/WX/Mac/displaynotify.mm
+++ WinPort/src/Backend/WX/Mac/displaynotify.mm
@@ -1,12 +1,24 @@
 #import <Foundation/Foundation.h>
 #import <Cocoa/Cocoa.h>
+#include <AvailabilityMacros.h>
 
 bool MacDisplayNotify(const char *title, const char *text)
 {
+	NSString *nsTitle = [NSString stringWithUTF8String:title];
+	NSString *nsText  = [NSString stringWithUTF8String:text];
+
+#if MAC_OS_X_VERSION_MIN_REQUIRED >= 1080
 	NSUserNotification *userNotification = [[NSUserNotification alloc] init];
-	userNotification.title = [NSString stringWithUTF8String:title];
-	userNotification.informativeText = [NSString stringWithUTF8String:text];
+	userNotification.title = nsTitle;
+	userNotification.informativeText = nsText;
 
 	[[NSUserNotificationCenter defaultUserNotificationCenter] deliverNotification:userNotification]; //deliverNotification
+#else
+	NSAlert *alert = [[NSAlert alloc] init];
+	[alert setMessageText:nsTitle];
+	[alert setInformativeText:nsText];
+	[alert addButtonWithTitle:@"OK"];
+	[alert runModal];
+#endif
 	return true;
 }
