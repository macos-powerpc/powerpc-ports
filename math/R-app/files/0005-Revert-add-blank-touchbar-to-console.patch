From 3b3d97c0cabf4fcd942b7442a55fe9fbdfa010f6 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Fri, 17 Jan 2025 06:43:46 +0800
Subject: [PATCH 05/12] Revert "add blank touchbar to console"

This reverts commit 445c5133f7f6ac2e39aaaf36f68e298c546a2eea.
---
 RController.m | 21 +--------------------
 1 file changed, 1 insertion(+), 20 deletions(-)

diff --git a/RController.m b/RController.m
index 38616ae..3a2a7b7 100644
--- a/RController.m
+++ b/RController.m
@@ -323,21 +323,6 @@ static int R_SetOptionWidth(int width) {
 	}
 }
 
-- (NSTouchBar *)makeTouchBar
-{
-	// Create TouchBar object
-	SLog(@"makeTouchBar");
-	NSTouchBar *touchBar = [[NSTouchBar alloc] init];
-	touchBar.delegate = self;
-	touchBar.customizationIdentifier = @"org.R-project.R.app.console";
-
-	// Set the default ordering of items.
-	touchBar.defaultItemIdentifiers = @[@"foo", NSTouchBarItemIdentifierOtherItemsProxy];
-	touchBar.customizationAllowedItemIdentifiers = @[@"foo"];
-	touchBar.principalItemIdentifier = @"foo";
-
-	return touchBar;
-}
 
 /* This is user's library path as interpreted by the R GUI. Note that
    during initialization the GUI has no access to R_LIBS_USER, because
@@ -412,6 +397,7 @@ static int R_SetOptionWidth(int width) {
 	[consoleTextView setContinuousSpellCheckingEnabled:NO]; // force 'no spell checker'
 	[[consoleTextView textStorage] setDelegate:self];
 
+
 	RTextView_autoCloseBrackets = [Preferences flagForKey:kAutoCloseBrackets withDefault:YES];
 
 	[self setupToolbar];
@@ -419,11 +405,6 @@ static int R_SetOptionWidth(int width) {
 	[RConsoleWindow setBackgroundColor:[defaultConsoleColors objectAtIndex:iBackgroundColor]]; // we need this, because "update" doesn't touch the color if it's equal - and by default the window has *no* background - not even the default one, so we bring it in sync
 	[RConsoleWindow setDocumentEdited:YES];
 
-	// Force essentially an empty TouchBar due to performance
-	// problems with Apple's default implemenation
-	[NSApplication sharedApplication].automaticCustomizeTouchBarMenuItemEnabled = YES;
-	consoleTextView.touchBar = [self makeTouchBar];
-
 	SLog(@" - working directory setup timer");
 	WDirtimer = [NSTimer scheduledTimerWithTimeInterval:0.5
 												 target:self
-- 
2.52.0

