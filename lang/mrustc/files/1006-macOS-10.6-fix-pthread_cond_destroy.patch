From 60e45e158a8a96230105cf3be70180eb3cfb774f Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Fri, 7 Nov 2025 17:53:18 +0800
Subject: [PATCH 4/5] macOS 10.6: fix pthread_cond_destroy

---
 src/libstd/sys/unix/condvar.rs | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/libstd/sys/unix/condvar.rs b/src/libstd/sys/unix/condvar.rs
index 4f878d8ad1..4223f565bd 100644
--- a/src/libstd/sys/unix/condvar.rs
+++ b/src/libstd/sys/unix/condvar.rs
@@ -168,14 +168,14 @@ impl Condvar {
     }
 
     #[inline]
-    #[cfg(not(target_os = "dragonfly"))]
+    #[cfg(all(not(target_os = "dragonfly"), not(target_os = "macos")))]
     pub unsafe fn destroy(&self) {
         let r = libc::pthread_cond_destroy(self.inner.get());
         debug_assert_eq!(r, 0);
     }
 
     #[inline]
-    #[cfg(target_os = "dragonfly")]
+    #[cfg(any(target_os = "dragonfly", target_os = "macos"))]
     pub unsafe fn destroy(&self) {
         let r = libc::pthread_cond_destroy(self.inner.get());
         // On DragonFly pthread_cond_destroy() returns EINVAL if called on
-- 
2.51.0

