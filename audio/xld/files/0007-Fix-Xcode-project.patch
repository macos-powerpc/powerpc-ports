From 2c20003a09358c2c473741d2c873166a97dbb642 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Thu, 22 Jan 2026 08:36:47 +0800
Subject: [PATCH 7/7] Fix Xcode project

---
 XLD/XLD_export.xcodeproj/project.pbxproj | 38 ++++++++++--------------
 1 file changed, 15 insertions(+), 23 deletions(-)

diff --git a/XLD/XLD_export.xcodeproj/project.pbxproj b/XLD/XLD_export.xcodeproj/project.pbxproj
index dd04948..2c51d47 100644
--- a/XLD/XLD_export.xcodeproj/project.pbxproj
+++ b/XLD/XLD_export.xcodeproj/project.pbxproj
@@ -33,7 +33,6 @@
 		BF24F1C40E828D8E007E24DE /* offsetlist.plist in Resources */ = {isa = PBXBuildFile; fileRef = BF24F1C30E828D8E007E24DE /* offsetlist.plist */; };
 		BF24F1D80E829140007E24DE /* IOKit.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = BF24F1D70E829140007E24DE /* IOKit.framework */; };
 		BF2B874812A00413002CB1FF /* XLDTrackValidator.m in Sources */ = {isa = PBXBuildFile; fileRef = BF2B874612A00413002CB1FF /* XLDTrackValidator.m */; };
-		BF2D3F980E72C5BD00BE32E5 /* XLDSparkleUpdater.bundle in CopyFiles */ = {isa = PBXBuildFile; fileRef = BF2D3F970E72C5BD00BE32E5 /* XLDSparkleUpdater.bundle */; };
 		BF2E0E300E5EDA4100A13E00 /* XLDAccurateRipChecker.m in Sources */ = {isa = PBXBuildFile; fileRef = BF2E0E2E0E5EDA4100A13E00 /* XLDAccurateRipChecker.m */; };
 		BF2F0010128E75E800B01786 /* XLDSecureRipperEngine.m in Sources */ = {isa = PBXBuildFile; fileRef = BF2FFFEE128E53AA00B01786 /* XLDSecureRipperEngine.m */; };
 		BF310DBA0CE9889A005083EC /* XLDAacOutput2.bundle in CopyFiles */ = {isa = PBXBuildFile; fileRef = BF310D9A0CE98882005083EC /* XLDAacOutput2.bundle */; };
@@ -137,8 +136,9 @@
 		BFF32F511382C0D600B5DCDB /* XLDAmazonSearcher.m in Sources */ = {isa = PBXBuildFile; fileRef = BFF32F501382C0D600B5DCDB /* XLDAmazonSearcher.m */; };
 		BFF3316613862CDC00B5DCDB /* XLDCoverArtSearcher.m in Sources */ = {isa = PBXBuildFile; fileRef = BFF3316513862CDC00B5DCDB /* XLDCoverArtSearcher.m */; };
 		BFF331701386359D00B5DCDB /* CoverArtSearcher.xib in Resources */ = {isa = PBXBuildFile; fileRef = BFF3316E1386359D00B5DCDB /* CoverArtSearcher.xib */; };
-		BFF7E77E1126FEDD00300E40 /* XLDTakDecoder.bundle in CopyFiles */ = {isa = PBXBuildFile; fileRef = BFF7E77D1126FEDD00300E40 /* XLDTakDecoder.bundle */; };
 		BFFCC5F20B0F7A62005CE0B7 /* XLDFlacDecoder.bundle in CopyFiles */ = {isa = PBXBuildFile; fileRef = BFFCC5CB0B0F7A45005CE0B7 /* XLDFlacDecoder.bundle */; };
+		F471E9882A4007CF00CCF1B9 /* XLDGainAnalyzer.c in Sources */ = {isa = PBXBuildFile; fileRef = F471E9862A4007CF00CCF1B9 /* XLDGainAnalyzer.c */; };
+		F471E98A2A40089900CCF1B9 /* SystemConfiguration.framework in Frameworks */ = {isa = PBXBuildFile; fileRef = F471E9892A40089900CCF1B9 /* SystemConfiguration.framework */; };
 /* End PBXBuildFile section */
 
 /* Begin PBXCopyFilesBuildPhase section */
@@ -149,9 +149,7 @@
 			dstSubfolderSpec = 13;
 			files = (
 				BFA7C90416296F6700C5116B /* XLDOpusOutput.bundle in CopyFiles */,
-				BFF7E77E1126FEDD00300E40 /* XLDTakDecoder.bundle in CopyFiles */,
 				BFB24D1C10BA622D00E11EBF /* XLDShortenDecoder.bundle in CopyFiles */,
-				BF2D3F980E72C5BD00BE32E5 /* XLDSparkleUpdater.bundle in CopyFiles */,
 				BF7C727C0DE34D3400325E88 /* XLDWavpackOutput.bundle in CopyFiles */,
 				BF51575B0D7D937C001C0905 /* XLDHEAACOutput.bundle in CopyFiles */,
 				BF310DBA0CE9889A005083EC /* XLDAacOutput2.bundle in CopyFiles */,
@@ -220,7 +218,6 @@
 		BF24F1D70E829140007E24DE /* IOKit.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = IOKit.framework; path = /System/Library/Frameworks/IOKit.framework; sourceTree = "<absolute>"; };
 		BF2B874612A00413002CB1FF /* XLDTrackValidator.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = XLDTrackValidator.m; sourceTree = "<group>"; };
 		BF2B874712A00413002CB1FF /* XLDTrackValidator.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = XLDTrackValidator.h; sourceTree = "<group>"; };
-		BF2D3F970E72C5BD00BE32E5 /* XLDSparkleUpdater.bundle */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.plug-in"; name = XLDSparkleUpdater.bundle; path = ../XLDSparkleUpdater/build/Release/XLDSparkleUpdater.bundle; sourceTree = "<group>"; };
 		BF2E0E2D0E5EDA4100A13E00 /* XLDAccurateRipChecker.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = XLDAccurateRipChecker.h; sourceTree = "<group>"; };
 		BF2E0E2E0E5EDA4100A13E00 /* XLDAccurateRipChecker.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = XLDAccurateRipChecker.m; sourceTree = "<group>"; };
 		BF2FFFED128E53AA00B01786 /* XLDSecureRipperEngine.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = XLDSecureRipperEngine.h; sourceTree = "<group>"; };
@@ -380,8 +377,10 @@
 		BFF3316413862CDC00B5DCDB /* XLDCoverArtSearcher.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = XLDCoverArtSearcher.h; sourceTree = "<group>"; };
 		BFF3316513862CDC00B5DCDB /* XLDCoverArtSearcher.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; path = XLDCoverArtSearcher.m; sourceTree = "<group>"; };
 		BFF337F21388FA2F00B5DCDB /* English */ = {isa = PBXFileReference; lastKnownFileType = file.xib; name = English; path = English.lproj/CoverArtSearcher.xib; sourceTree = "<group>"; };
-		BFF7E77D1126FEDD00300E40 /* XLDTakDecoder.bundle */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.plug-in"; name = XLDTakDecoder.bundle; path = ../XLDTakDecoder/build/Release/XLDTakDecoder.bundle; sourceTree = "<group>"; };
 		BFFCC5CB0B0F7A45005CE0B7 /* XLDFlacDecoder.bundle */ = {isa = PBXFileReference; lastKnownFileType = "wrapper.plug-in"; name = XLDFlacDecoder.bundle; path = ../XLDFlacDecoder/build/Release/XLDFlacDecoder.bundle; sourceTree = "<group>"; };
+		F471E9862A4007CF00CCF1B9 /* XLDGainAnalyzer.c */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.c; path = XLDGainAnalyzer.c; sourceTree = "<group>"; };
+		F471E9872A4007CF00CCF1B9 /* XLDGainAnalyzer.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; path = XLDGainAnalyzer.h; sourceTree = "<group>"; };
+		F471E9892A40089900CCF1B9 /* SystemConfiguration.framework */ = {isa = PBXFileReference; lastKnownFileType = wrapper.framework; name = SystemConfiguration.framework; path = /System/Library/Frameworks/SystemConfiguration.framework; sourceTree = "<absolute>"; };
 /* End PBXFileReference section */
 
 /* Begin PBXFrameworksBuildPhase section */
@@ -398,6 +397,7 @@
 				BF85F5851371579E00D71081 /* DiscRecording.framework in Frameworks */,
 				BF85F5871371579E00D71081 /* DiscRecordingUI.framework in Frameworks */,
 				BF8CD8E815BEAEEC00433B47 /* libcrypto.dylib in Frameworks */,
+				F471E98A2A40089900CCF1B9 /* SystemConfiguration.framework in Frameworks */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -514,6 +514,7 @@
 		1058C7A0FEA54F0111CA2CBB /* Linked Frameworks */ = {
 			isa = PBXGroup;
 			children = (
+				F471E9892A40089900CCF1B9 /* SystemConfiguration.framework */,
 				BF5593DC0EC9EEAA00562F2C /* CoreAudio.framework */,
 				BF24F1D70E829140007E24DE /* IOKit.framework */,
 				BFC5E9F90E4E294300B3EF55 /* DiskArbitration.framework */,
@@ -570,6 +571,8 @@
 				BF1166A6128AF2450058749F /* XLDCDDABackend.c */,
 				BF43BCE80B00C1FF00A676A0 /* sfifo.h */,
 				BF43BCE90B00C1FF00A676A0 /* sfifo.c */,
+				F471E9862A4007CF00CCF1B9 /* XLDGainAnalyzer.c */,
+				F471E9872A4007CF00CCF1B9 /* XLDGainAnalyzer.h */,
 				BF1192000E7B91DA004BC21D /* gain_analysis.h */,
 				BF1191FF0E7B91DA004BC21D /* gain_analysis.c */,
 			);
@@ -641,7 +644,6 @@
 		BF375B940A3D0D0F0003FD0E /* Plugin */ = {
 			isa = PBXGroup;
 			children = (
-				BF2D3F970E72C5BD00BE32E5 /* XLDSparkleUpdater.bundle */,
 				BF7C725B0DE34D1D00325E88 /* XLDWavpackOutput.bundle */,
 				BF51575A0D7D937C001C0905 /* XLDHEAACOutput.bundle */,
 				BF6CA3C20D6579610089BAAA /* XLDMP3Decoder.bundle */,
@@ -658,7 +660,6 @@
 				BF3758C90A3C14090003FD0E /* XLDApeDecoder.bundle */,
 				BF3758CA0A3C14090003FD0E /* XLDLibsndfileDecoder.bundle */,
 				BFB24D1B10BA622D00E11EBF /* XLDShortenDecoder.bundle */,
-				BFF7E77D1126FEDD00300E40 /* XLDTakDecoder.bundle */,
 				BFA7C90316296F6700C5116B /* XLDOpusOutput.bundle */,
 			);
 			name = Plugin;
@@ -846,6 +847,7 @@
 				BF5FB7A5178D53C30076055E /* XLDLMAXMLLoader.m in Sources */,
 				BF598919181B8C11003E0FBD /* XLDCCDLoader.m in Sources */,
 				BF8246CB1BEDB2310033CDF4 /* XLDOpticalDriveManager.m in Sources */,
+				F471E9882A4007CF00CCF1B9 /* XLDGainAnalyzer.c in Sources */,
 			);
 			runOnlyForDeploymentPostprocessing = 0;
 		};
@@ -954,10 +956,6 @@
 		C01FCF4B08A954540054247B /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = (
-					i386,
-					ppc,
-				);
 				COPY_PHASE_STRIP = NO;
 				FRAMEWORK_SEARCH_PATHS = (
 					"$(FRAMEWORK_SEARCH_PATHS)",
@@ -988,7 +986,7 @@
 				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
 				GCC_OPTIMIZATION_LEVEL = 3;
 				INFOPLIST_FILE = Info.plist;
-				INSTALL_PATH = "$(HOME)/Applications";
+				INSTALL_PATH = "/Applications/MacPorts";
 				PRODUCT_NAME = XLD;
 			};
 			name = Release;
@@ -996,14 +994,9 @@
 		C01FCF4F08A954540054247B /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = (
-					i386,
-					ppc,
-				);
 				GCC_ENABLE_SSE3_EXTENSIONS = YES;
 				GCC_PRECOMPILE_PREFIX_HEADER = YES;
 				GCC_PREFIX_HEADER = XLD_Prefix.pch;
-				GCC_VERSION = 4.0;
 				GCC_WARN_ABOUT_RETURN_TYPE = YES;
 				GCC_WARN_UNUSED_VARIABLE = YES;
 				ONLY_ACTIVE_ARCH = YES;
@@ -1011,10 +1004,10 @@
 					"-lsndfile",
 					"-lcddb",
 					"-lsoxr",
+					"-lebur128",
 				);
 				PREBINDING = NO;
-				SDKROOT = /Developer/SDKs/MacOSX10.4u.sdk;
-				USER_HEADER_SEARCH_PATHS = /usr/local/include;
+				USER_HEADER_SEARCH_PATHS = @PREFIX@/include;
 			};
 			name = Debug;
 		};
@@ -1028,7 +1021,6 @@
 				GCC_ENABLE_SSE3_EXTENSIONS = YES;
 				GCC_PRECOMPILE_PREFIX_HEADER = YES;
 				GCC_PREFIX_HEADER = XLD_Prefix.pch;
-				GCC_VERSION = 4.0;
 				GCC_WARN_ABOUT_RETURN_TYPE = YES;
 				GCC_WARN_UNUSED_VARIABLE = YES;
 				ONLY_ACTIVE_ARCH = YES;
@@ -1036,10 +1028,10 @@
 					"-lsndfile",
 					"-lcddb",
 					"-lsoxr",
+					"-lebur128",
 				);
 				PREBINDING = NO;
-				SDKROOT = /Developer/SDKs/MacOSX10.4u.sdk;
-				USER_HEADER_SEARCH_PATHS = /usr/local/include;
+				USER_HEADER_SEARCH_PATHS = @PREFIX@/include;
 			};
 			name = Release;
 		};
-- 
2.52.0

