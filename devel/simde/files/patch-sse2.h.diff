From d362953858be0036a53920024b84e4e119b3c527 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <barracuda@macos-powerpc.org>
Date: Tue, 9 Sep 2025 18:02:36 +0800
Subject: [PATCH] sse2.h: fix simde_mm_pause for powerpc*-darwin

See: https://github.com/simd-everywhere/simde/issues/1313
---
 simde/x86/sse2.h | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/simde/x86/sse2.h b/simde/x86/sse2.h
index c65af934e..48b701f21 100644
--- simde/x86/sse2.h
+++ simde/x86/sse2.h
@@ -5245,7 +5245,11 @@ simde_mm_pause (void) {
       __asm__ __volatile__("isb\n");
     #endif
   #elif defined(SIMDE_ARCH_POWER)
-    __asm__ __volatile__ ("or 27,27,27" ::: "memory");
+    #if defined(__APPLE__)
+      __asm__ __volatile__ ("or r27,r27,r27" ::: "memory");
+    #else
+      __asm__ __volatile__ ("or 27,27,27" ::: "memory");
+    #endif
   #elif defined(SIMDE_ARCH_WASM)
     __asm__ __volatile__ ("nop");
   #elif defined(SIMDE_LOONGARCH_LSX_NATIVE)
