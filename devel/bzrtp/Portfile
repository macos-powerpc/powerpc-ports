# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           cmake 1.1
PortGroup           github 1.0
PortGroup           openssl 1.0

github.setup        BelledonneCommunications bzrtp 5.4.46
revision            0

categories          devel
license             {GPL-3 Commercial}
maintainers         nomaintainer

description         Open-source implementation of ZRTP keys exchange protocol
long_description    \
    BZRTP is an open-source implementation of ZRTP keys exchange protocol. \
    The library written in C89 is fully portable and can be executed on many \
    platforms including both ARM processor and x86.

checksums           rmd160  7371067fdd204915e13f4a7f5d1c613da8539bb6 \
                    sha256  97ec9a3617e64d6c19a4581a675c72dad138dde98e4e2987073c52e977b258f0 \
                    size    196952
github.tarball_from archive

patchfiles          patch-use-openssl.diff

depends_build-append \
                    port:bcunit \
                    path:bin/pkg-config:pkgconfig
depends_lib         port:bctoolbox \
                    port:libiconv \
                    port:libxml2 \
                    port:sqlite3

compiler.cxx_standard \
                    2017

configure.args-append \
                    -DENABLE_OPENSSL=YES \
                    -DENABLE_ZIDCACHE=YES

variant docs description "Build and install documentation in HTML format" {
    depends_build-append \
                    path:bin/doxygen:doxygen

    configure.args-append \
                    -DENABLE_DOC=YES
}

github.livecheck.regex  {([0-9.]+)}
