# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               github 1.0
PortGroup               legacysupport 1.1

# _SC_PHYS_PAGES, scandir
legacysupport.newest_darwin_requires_legacy 13

github.setup            ofiwg libfabric 2.3.1 v
revision                0

categories              devel parallel science
license                 BSD GPL-2
maintainers             {@barracuda156 macos-powerpc.org:barracuda} openmaintainer

description             Open Fabrics Interfaces (OFI)
long_description        ${name}, or {*}${description}, is a framework focused on exporting \
                        high-performance networking services to applications.

checksums               rmd160  2fe1ad65567ce111217fdcdec8ec39fcd0dd7fb0 \
                        sha256  a97e91c84cc0fe733644211fd5cca628ef843ca53033f7c2cd187d054109cecf \
                        size    4910480
github.tarball_from     archive

compiler.c_standard     2011

use_autoreconf          yes
autoreconf.cmd          ./autogen.sh
autoreconf.args

depends_build-append    port:autoconf \
                        port:automake \
                        port:libtool

platform darwin {
    # macOS does not have epoll, but there are ports installing it.
    configure.args-append \
                        --disable-epoll

    if {${os.major} < 13} {
        configure.cflags-append \
                        -D_MACPORTS_LEGACY_COMPATIBLE_SCANDIR=1
    }
}
