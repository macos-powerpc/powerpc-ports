From 835e631aca953bb72b75590eadffb80b6bc8737a Mon Sep 17 00:00:00 2001
From: Stefan Csomor <csomor@advancedconcepts.ch>
Date: Wed, 29 Oct 2025 20:52:22 +0100
Subject: [PATCH 33/38] proper guard non-iphone code

---
 include/wx/osx/core/private.h | 14 +++++++++-----
 src/osx/cocoa/utils_base.mm   |  4 ++++
 2 files changed, 13 insertions(+), 5 deletions(-)

diff --git a/include/wx/osx/core/private.h b/include/wx/osx/core/private.h
index 57f3b0d917..5fd3242daa 100644
--- a/include/wx/osx/core/private.h
+++ b/include/wx/osx/core/private.h
@@ -1056,9 +1056,13 @@ protected :
 // cocoa bridging utilities
 //---------------------------------------------------------------------------
 
-bool wxMacInitCocoa();
+#if !defined(__WXOSX_IPHONE__) || !__WXOSX_IPHONE__
 
-class WXDLLIMPEXP_CORE wxMacAutoreleasePool
+bool WXDLLIMPEXP_BASE wxMacInitCocoa();
+
+#endif // !defined(__WXOSX_IPHONE__) || !__WXOSX_IPHONE__
+
+class WXDLLIMPEXP_BASE wxMacAutoreleasePool
 {
 public :
     wxMacAutoreleasePool();
@@ -1069,9 +1073,9 @@ private :
 
 // NSObject
 
-void wxMacCocoaRelease( void* obj );
-void wxMacCocoaAutorelease( void* obj );
-void* wxMacCocoaRetain( void* obj );
+void WXDLLIMPEXP_BASE wxMacCocoaRelease( void* obj );
+void WXDLLIMPEXP_BASE wxMacCocoaAutorelease( void* obj );
+void* WXDLLIMPEXP_BASE wxMacCocoaRetain( void* obj );
 
 // shared_ptr like API for NSObject and subclasses
 template <class T>
diff --git a/src/osx/cocoa/utils_base.mm b/src/osx/cocoa/utils_base.mm
index ec03e99c95..784b9463e9 100644
--- a/src/osx/cocoa/utils_base.mm
+++ b/src/osx/cocoa/utils_base.mm
@@ -374,9 +374,13 @@ wxString wxStringWithNSString(NSString *nsstring)
 // helper when starting as a command line tool without an NSApp running at all
 //----------------------------------------------------------------------------
 
+#if !defined(__WXOSX_IPHONE__) || !__WXOSX_IPHONE__
+
 bool wxMacInitCocoa()
 {
     bool cocoaLoaded = NSApplicationLoad();
     wxASSERT_MSG(cocoaLoaded,wxT("Couldn't load Cocoa in Carbon Environment")) ;
     return cocoaLoaded;
 }
+
+#endif // !defined(__WXOSX_IPHONE__) || !__WXOSX_IPHONE__
-- 
2.24.3 (Apple Git-128)

