--- modules/imgcodecs/CMakeLists.txt	2021-12-25 11:53:27.000000000 +0800
+++ modules/imgcodecs/CMakeLists.txt	2026-02-18 20:29:52.000000000 +0800
@@ -122,7 +122,7 @@
      "${CMAKE_CURRENT_LIST_DIR}/include/opencv2/${name}/legacy/*.h"
      )
 
-if(APPLE OR APPLE_FRAMEWORK)
+if(WITH_AVFOUNDATION)
   list(APPEND imgcodecs_srcs ${CMAKE_CURRENT_LIST_DIR}/src/apple_conversions.h)
   list(APPEND imgcodecs_srcs ${CMAKE_CURRENT_LIST_DIR}/src/apple_conversions.mm)
 endif()
@@ -130,7 +130,7 @@
   list(APPEND imgcodecs_srcs ${CMAKE_CURRENT_LIST_DIR}/src/ios_conversions.mm)
   list(APPEND IMGCODECS_LIBRARIES "-framework UIKit")
 endif()
-if(APPLE AND (NOT IOS))
+if(WITH_AVFOUNDATION AND (NOT IOS))
   list(APPEND imgcodecs_srcs ${CMAKE_CURRENT_LIST_DIR}/src/macosx_conversions.mm)
   list(APPEND IMGCODECS_LIBRARIES "-framework AppKit")
 endif()
