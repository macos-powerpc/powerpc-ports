--- src/cocoa_monitor.m	2016-08-18 19:32:27.000000000 +0800
+++ src/cocoa_monitor.m	2026-01-11 00:39:08.000000000 +0800
@@ -62,6 +62,11 @@
         return strdup("Unknown");
     }
 
+    if (!value) {
+        CFRelease(info);
+        return strdup("Unknown");
+    }
+
     size = CFStringGetMaximumSizeForEncoding(CFStringGetLength(value),
                                              kCFStringEncodingUTF8);
     name = calloc(size + 1, 1);
@@ -87,6 +92,9 @@
         return GLFW_FALSE;
 
     CFStringRef format = CGDisplayModeCopyPixelEncoding(mode);
+    if (!format)
+        return GLFW_FALSE;
+
     if (CFStringCompare(format, CFSTR(IO16BitDirectPixels), 0) &&
         CFStringCompare(format, CFSTR(IO32BitDirectPixels), 0))
     {
@@ -117,6 +125,13 @@
 
     CFStringRef format = CGDisplayModeCopyPixelEncoding(mode);
 
+    if (!format) {
+        result.redBits = 8;
+        result.greenBits = 8;
+        result.blueBits = 8;
+        return result;
+    }
+
     if (CFStringCompare(format, CFSTR(IO16BitDirectPixels), 0) == 0)
     {
         result.redBits = 5;

--- src/nsgl_context.m	2016-08-18 19:32:27.000000000 +0800
+++ src/nsgl_context.m	2026-01-11 01:06:12.000000000 +0800
@@ -171,6 +172,7 @@
     ADD_ATTR(NSOpenGLPFAAccelerated);
     ADD_ATTR(NSOpenGLPFAClosestPolicy);
 
+#if MAC_OS_X_VERSION_MAX_ALLOWED >= 1070
 #if MAC_OS_X_VERSION_MAX_ALLOWED >= 101000
     if (ctxconfig->major >= 4)
     {
@@ -180,12 +182,9 @@
 #endif /*MAC_OS_X_VERSION_MAX_ALLOWED*/
     if (ctxconfig->major >= 3)
     {
-#if MAC_OS_X_VERSION_MAX_ALLOWED >= 1070
         ADD_ATTR2(NSOpenGLPFAOpenGLProfile, NSOpenGLProfileVersion3_2Core);
-#else
-            // OpenGL 3.2 Core Profile is not supported on 10.6
-#endif
     }
+#endif
 
     if (ctxconfig->major <= 2)
     {
