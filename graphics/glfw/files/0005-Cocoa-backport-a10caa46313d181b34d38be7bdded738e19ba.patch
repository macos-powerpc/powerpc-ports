From f378f7d0774b71b6278cfec76f8b35605e6c7c98 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Thu, 8 Jan 2026 14:24:24 +0800
Subject: [PATCH 4/6] Cocoa: backport a10caa46313d181b34d38be7bdded738e19baefd

---
 include/GLFW/glfw3.h | 23 +++++++++++++++++++++++
 src/cocoa_window.m   | 19 ++++++++++++++++++-
 src/internal.h       | 11 +++++++++++
 src/window.c         | 12 ++++++++++++
 4 files changed, 64 insertions(+), 1 deletion(-)

diff --git include/GLFW/glfw3.h include/GLFW/glfw3.h
index b6412161..18dccb92 100644
--- include/GLFW/glfw3.h
+++ include/GLFW/glfw3.h
@@ -620,6 +620,7 @@ extern "C" {
 #define GLFW_DECORATED              0x00020005
 #define GLFW_AUTO_ICONIFY           0x00020006
 #define GLFW_FLOATING               0x00020007
+#define GLFW_MAXIMIZED              0x00020008
 
 #define GLFW_RED_BITS               0x00021001
 #define GLFW_GREEN_BITS             0x00021002
@@ -2086,6 +2087,28 @@ GLFWAPI void glfwIconifyWindow(GLFWwindow* window);
  */
 GLFWAPI void glfwRestoreWindow(GLFWwindow* window);
 
+/*! @brief Maximizes the specified window.
+ *
+ *  This function maximizes the specified window if it was previously not
+ *  maximized.  If the window is already maximized, this function does nothing.
+ *
+ *  If the specified window is a full screen window, this function does nothing.
+ *
+ *  @param[in] window The window to maximize.
+ *
+ *  @par Thread Safety
+ *  This function may only be called from the main thread.
+ *
+ *  @sa @ref window_iconify
+ *  @sa glfwIconifyWindow
+ *  @sa glfwRestoreWindow
+ *
+ *  @since Added in GLFW 3.2.
+ *
+ *  @ingroup window
+ */
+GLFWAPI void glfwMaximizeWindow(GLFWwindow* window);
+
 /*! @brief Makes the specified window visible.
  *
  *  This function makes the specified window visible if it was previously
diff --git src/cocoa_window.m src/cocoa_window.m
index 02d4d9de..1dbbfbd3 100644
--- src/cocoa_window.m
+++ src/cocoa_window.m
@@ -894,6 +894,9 @@ static GLFWbool createWindow(_GLFWwindow* window,
 
         if (wndconfig->floating)
             [window->ns.object setLevel:NSFloatingWindowLevel];
+
+        if (wndconfig->maximized)
+            [window->ns.object zoom:nil];
     }
 
     window->ns.view = [[GLFWContentView alloc] initWithGlfwWindow:window];
@@ -1071,7 +1074,16 @@ void _glfwPlatformIconifyWindow(_GLFWwindow* window)
 
 void _glfwPlatformRestoreWindow(_GLFWwindow* window)
 {
-    [window->ns.object deminiaturize:nil];
+    if ([window->ns.object isMiniaturized])
+        [window->ns.object deminiaturize:nil];
+    else if ([window->ns.object isZoomed])
+        [window->ns.object zoom:nil];
+}
+
+void _glfwPlatformMaximizeWindow(_GLFWwindow* window)
+{
+    if (![window->ns.object isZoomed])
+        [window->ns.object zoom:nil];
 }
 
 void _glfwPlatformShowWindow(_GLFWwindow* window)
@@ -1110,6 +1122,11 @@ int _glfwPlatformWindowVisible(_GLFWwindow* window)
     return [window->ns.object isVisible];
 }
 
+int _glfwPlatformWindowMaximized(_GLFWwindow* window)
+{
+    return [window->ns.object isZoomed];
+}
+
 void _glfwPlatformSetWindowResizable(_GLFWwindow* window, GLFWbool enabled)
 {
     [window->ns.object setStyleMask:getStyleMask(window)];
diff --git src/internal.h src/internal.h
index baa93241..e3c4d75b 100644
--- src/internal.h
+++ src/internal.h
@@ -178,6 +178,7 @@ struct _GLFWwndconfig
     GLFWbool      focused;
     GLFWbool      autoIconify;
     GLFWbool      floating;
+    GLFWbool      maximized;
     _GLFWmonitor* monitor;
 };
 
@@ -571,6 +572,11 @@ void _glfwPlatformIconifyWindow(_GLFWwindow* window);
  */
 void _glfwPlatformRestoreWindow(_GLFWwindow* window);
 
+/*! @copydoc glfwMaximizeWindow
+ *  @ingroup platform
+ */
+void _glfwPlatformMaximizeWindow(_GLFWwindow* window);
+
 /*! @copydoc glfwShowWindow
  *  @ingroup platform
  */
@@ -600,6 +606,11 @@ int _glfwPlatformWindowIconified(_GLFWwindow* window);
  */
 int _glfwPlatformWindowVisible(_GLFWwindow* window);
 
+/*! @brief Returns whether the window is maximized.
+ *  @ingroup platform
+ */
+int _glfwPlatformWindowMaximized(_GLFWwindow* window);
+
 /*! @brief Sets whether the window is resizable by the user.
  *  @ingroup platform
  */
diff --git src/window.c src/window.c
index 0c31a7ba..71bd0d94 100644
--- src/window.c
+++ src/window.c
@@ -336,6 +336,9 @@ GLFWAPI void glfwWindowHint(int target, int hint)
         case GLFW_FLOATING:
             _glfw.hints.window.floating = hint ? GLFW_TRUE : GLFW_FALSE;
             break;
+        case GLFW_MAXIMIZED:
+            _glfw.hints.window.maximized = hint ? GLFW_TRUE : GLFW_FALSE;
+            break;
         case GLFW_VISIBLE:
             _glfw.hints.window.visible = hint ? GLFW_TRUE : GLFW_FALSE;
             break;
@@ -567,6 +570,13 @@ GLFWAPI void glfwRestoreWindow(GLFWwindow* handle)
     _glfwPlatformRestoreWindow(window);
 }
 
+GLFWAPI void glfwMaximizeWindow(GLFWwindow* handle)
+{
+    _GLFWwindow* window = (_GLFWwindow*) handle;
+    _GLFW_REQUIRE_INIT();
+    _glfwPlatformMaximizeWindow(window);
+}
+
 GLFWAPI void glfwShowWindow(GLFWwindow* handle)
 {
     _GLFWwindow* window = (_GLFWwindow*) handle;
@@ -605,6 +615,8 @@ GLFWAPI int glfwGetWindowAttrib(GLFWwindow* handle, int attrib)
             return _glfwPlatformWindowIconified(window);
         case GLFW_VISIBLE:
             return _glfwPlatformWindowVisible(window);
+        case GLFW_MAXIMIZED:
+            return _glfwPlatformWindowMaximized(window);
         case GLFW_RESIZABLE:
             return window->resizable;
         case GLFW_DECORATED:
-- 
2.52.0

