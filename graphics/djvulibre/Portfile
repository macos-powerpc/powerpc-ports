# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0

name                djvulibre
version             3.5.29
revision            0
categories          graphics www
license             GPL-2+
maintainers         {nicos @NicosPavlov} openmaintainer

description         Web-centric format and software platform for distributing \
                    documents and images.
long_description    DjVu can advantageously replace PDF, PS, TIFF, JPEG and GIF \
                    for distributing scanned documents, digital documents or \
                    high-resolution pictures. DjVu content downloads faster, \
                    displays and renders faster, looks nicer onscreen and consumes \
                    fewer client resources than competing formats.

homepage            https://djvu.sourceforge.net
master_sites        sourceforge:project/djvu/DjVuLibre/${version}

checksums           rmd160  c4538e4a6e27baa9cbd4905bafc88cc41a78710b \
                    sha256  d3b4b03ae2bdca8516a36ef6eb27b777f0528c9eda26745d9962824a3fdfeccf \
                    size    3716911

depends_lib         port:libiconv \
                    path:include/turbojpeg.h:libjpeg-turbo \
                    port:tiff

patchfiles          patch-noconvert.diff
 
# Teach glibtool about -stdlib=libc++
use_autoreconf  yes
autoreconf.args -fvi

configure.args      --mandir=${prefix}/share/man \
                    --enable-threads \
                    --enable-shared \
                    --enable-xmltools \
                    --disable-desktopfiles \
                    --disable-silent-rules

livecheck.regex      /${name}-(\[0-9.\]+)${extract.suffix}
