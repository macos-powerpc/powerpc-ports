--- src/libANGLE/Display.cpp.orig	2025-09-30 05:58:34.000000000 +0800
+++ src/libANGLE/Display.cpp	2025-11-04 04:50:56.000000000 +0800
@@ -49,7 +49,7 @@
 #include "libANGLE/trace.h"
 
 #if defined(ANGLE_PLATFORM_APPLE)
-#    include <dispatch/dispatch.h>
+#    include <pthread.h>
 #    include "common/tls.h"
 #endif
 
@@ -109,15 +109,23 @@
 // TODO(angleproject:6479): Due to a bug in Apple's dyld loader, `thread_local` will cause
 // excessive memory use. Temporarily avoid it by using pthread's thread
 // local storage instead.
+
+namespace
+{
+angle::TLSIndex g_DisplayIndex = TLS_INVALID_INDEX;
+pthread_once_t g_DisplayIndexOnce = PTHREAD_ONCE_INIT;
+
+void InitDisplayTLSIndex()
+{
+    ASSERT(g_DisplayIndex == TLS_INVALID_INDEX);
+    g_DisplayIndex = angle::CreateTLSIndex(nullptr);
+}
+}  // anonymous namespace
+
 static angle::TLSIndex GetDisplayTLSIndex()
 {
-    static angle::TLSIndex DisplayIndex = TLS_INVALID_INDEX;
-    static dispatch_once_t once;
-    dispatch_once(&once, ^{
-      ASSERT(DisplayIndex == TLS_INVALID_INDEX);
-      DisplayIndex = angle::CreateTLSIndex(nullptr);
-    });
-    return DisplayIndex;
+    pthread_once(&g_DisplayIndexOnce, InitDisplayTLSIndex);
+    return g_DisplayIndex;
 }
 TLSData *GetDisplayTLS()
 {
