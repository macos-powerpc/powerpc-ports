# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem              1.0
PortGroup               github 1.0
PortGroup               makefile 1.0

name                    flatcv
github.setup            ad-si FlatCV 0a7408888cd7c463eb12ad508cb075e343ddfc84
version                 0.2.0
revision                0
categories              graphics devel
maintainers             {@barracuda156 macos-powerpc.org:barracuda} openmaintainer
license                 ISC
description             Image processing and computer vision library
long_description        {*}${description} in pure C.
homepage                https://flatcv.ad-si.com
checksums               rmd160  bdef3abb3d198a773c95227ddd38605914b73f0f \
                        sha256  28d29a5c0a3266c13b4488f4739e79f685ad5a4685e229ce7f75c45e2dcd840d \
                        size    23662440
github.tarball_from     archive

patchfiles              0001-makefile-fix-macOS.patch

# type redefinition
compiler.c_standard     2011

build.target            mac-build mac-lib

build.cmd-prepend       CFLAGS="${configure.cflags} [get_canonical_archflags cc]"

variant tests description "Build tests" {
    build.target-append test-units

    test.run            yes
    # Tests are run at the end of the build.
    # No special target needed.
    test                { }
}

destroot.target-append  install-lib
