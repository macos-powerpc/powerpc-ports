From b0557a4818f6377e8573f62730d8ea78428395a0 Mon Sep 17 00:00:00 2001
From: satyam yadav <satyamyadavruler@gmail.com>
Date: Wed, 18 Feb 2026 20:51:02 +0530
Subject: [PATCH] Update apple_conversions.h

---
 modules/imgcodecs/src/apple_conversions.h | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/modules/imgcodecs/src/apple_conversions.h b/modules/imgcodecs/src/apple_conversions.h
index c68b922cfb2b..92ca3ee68c82 100644
--- a/modules/imgcodecs/src/apple_conversions.h
+++ b/modules/imgcodecs/src/apple_conversions.h
@@ -2,10 +2,18 @@
 // It is subject to the license terms in the LICENSE file found in the top-level directory
 // of this distribution and at http://opencv.org/license.html.
 
+#ifndef OPENCV_IMGCODECS_APPLE_CONVERSIONS_H
+#define OPENCV_IMGCODECS_APPLE_CONVERSIONS_H
+
 #include "opencv2/core.hpp"
 #import <Accelerate/Accelerate.h>
+
+#ifdef HAVE_AVFOUNDATION
 #import <AVFoundation/AVFoundation.h>
+#endif
 #import <ImageIO/ImageIO.h>
 
 CV_EXPORTS CGImageRef MatToCGImage(const cv::Mat& image) CF_RETURNS_RETAINED;
 CV_EXPORTS void CGImageToMat(const CGImageRef image, cv::Mat& m, bool alphaExist);
+
+#endif // OPENCV_IMGCODECS_APPLE_CONVERSIONS_H
\ No newline at end of file

From 8645a2db1b9cb76bfa3209532de78cd9e34eb32d Mon Sep 17 00:00:00 2001
From: satyam yadav <satyamyadavruler@gmail.com>
Date: Thu, 19 Feb 2026 16:55:03 +0530
Subject: [PATCH] Update apple_conversions.h

---
 modules/imgcodecs/src/apple_conversions.h | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/modules/imgcodecs/src/apple_conversions.h b/modules/imgcodecs/src/apple_conversions.h
index 92ca3ee68c82..d2f9c2499a1e 100644
--- a/modules/imgcodecs/src/apple_conversions.h
+++ b/modules/imgcodecs/src/apple_conversions.h
@@ -8,10 +8,16 @@
 #include "opencv2/core.hpp"
 #import <Accelerate/Accelerate.h>
 
+// Guard AVFoundation import based on CMake configuration
 #ifdef HAVE_AVFOUNDATION
 #import <AVFoundation/AVFoundation.h>
 #endif
+
+// Guard ImageIO import: available on iOS and macOS 10.8+
+#include <TargetConditionals.h>
+#if TARGET_OS_IPHONE || (defined(MAC_OS_X_VERSION_MAX_ALLOWED) && MAC_OS_X_VERSION_MAX_ALLOWED >= 1080)
 #import <ImageIO/ImageIO.h>
+#endif
 
 CV_EXPORTS CGImageRef MatToCGImage(const cv::Mat& image) CF_RETURNS_RETAINED;
 CV_EXPORTS void CGImageToMat(const CGImageRef image, cv::Mat& m, bool alphaExist);
