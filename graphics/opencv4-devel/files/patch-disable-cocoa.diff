From b763ef08ced3ac64c62f08d75ac799f87c770398 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Wed, 18 Feb 2026 13:42:13 +0800
Subject: [PATCH] Avoid Cocoa

---
 cmake/OpenCVFindLibsGUI.cmake  |  7 -------
 modules/highgui/CMakeLists.txt |  5 -----
 modules/highgui/src/window.cpp | 17 -----------------
 3 files changed, 29 deletions(-)

diff --git a/cmake/OpenCVFindLibsGUI.cmake b/cmake/OpenCVFindLibsGUI.cmake
index 735aae3475..607fa3c7f2 100644
--- a/cmake/OpenCVFindLibsGUI.cmake
+++ b/cmake/OpenCVFindLibsGUI.cmake
@@ -75,10 +75,3 @@ if(WITH_OPENGL)
     endif()
   endif()
 endif(WITH_OPENGL)
-
-# --- Cocoa ---
-if(APPLE)
-  if(NOT IOS AND NOT XROS AND CV_CLANG)
-    set(HAVE_COCOA YES)
-  endif()
-endif()
diff --git a/modules/highgui/CMakeLists.txt b/modules/highgui/CMakeLists.txt
index ae9c49c1cf..9e05247422 100644
--- a/modules/highgui/CMakeLists.txt
+++ b/modules/highgui/CMakeLists.txt
@@ -184,11 +184,6 @@ elseif(WINRT)
     message(STATUS "  ${name}:   Removing 'comctl32.lib, gdi32.lib, ole32.lib, setupapi.lib'")
     message(STATUS "  ${name}:   Leaving '${HIGHGUI_LIBRARIES}'")
   endif()
-elseif(HAVE_COCOA)
-  set(OPENCV_HIGHGUI_BUILTIN_BACKEND "COCOA")
-  add_definitions(-DHAVE_COCOA)
-  list(APPEND highgui_srcs ${CMAKE_CURRENT_LIST_DIR}/src/window_cocoa.mm)
-  list(APPEND HIGHGUI_LIBRARIES "-framework Cocoa")
 endif()
 
 if(TARGET ocv.3rdparty.win32ui)
diff --git a/modules/highgui/src/window.cpp b/modules/highgui/src/window.cpp
index ad05fc1ef9..c55c88a6ee 100644
--- a/modules/highgui/src/window.cpp
+++ b/modules/highgui/src/window.cpp
@@ -228,8 +228,6 @@ CV_IMPL void cvSetWindowProperty(const char* name, int prop_id, double prop_valu
             cvSetModeWindow_W32(name,prop_value);
         #elif defined (HAVE_GTK)
             cvSetModeWindow_GTK(name,prop_value);
-        #elif defined (HAVE_COCOA)
-            cvSetModeWindow_COCOA(name,prop_value);
         #elif defined (WINRT)
             cvSetModeWindow_WinRT(name, prop_value);
         #endif
@@ -253,8 +251,6 @@ CV_IMPL void cvSetWindowProperty(const char* name, int prop_id, double prop_valu
             // nothing
         #elif defined(HAVE_WIN32UI)
             cvSetPropTopmost_W32(name, (prop_value != 0 ? true : false));
-        #elif defined(HAVE_COCOA)
-            cvSetPropTopmost_COCOA(name, (prop_value != 0 ? true : false));
         #endif
     break;
 
@@ -313,8 +309,6 @@ CV_IMPL double cvGetWindowProperty(const char* name, int prop_id)
             return cvGetModeWindow_W32(name);
         #elif defined (HAVE_GTK)
             return cvGetModeWindow_GTK(name);
-        #elif defined (HAVE_COCOA)
-            return cvGetModeWindow_COCOA(name);
         #elif defined (WINRT)
             return cvGetModeWindow_WinRT(name);
         #else
@@ -366,8 +360,6 @@ CV_IMPL double cvGetWindowProperty(const char* name, int prop_id)
             return cvGetPropVisible_QT(name);
         #elif defined(HAVE_WIN32UI)
             return cvGetPropVisible_W32(name);
-        #elif defined(HAVE_COCOA)
-            return cvGetPropVisible_COCOA(name);
         #else
             return -1;
         #endif
@@ -378,8 +370,6 @@ CV_IMPL double cvGetWindowProperty(const char* name, int prop_id)
             return -1;
         #elif defined(HAVE_WIN32UI)
             return cvGetPropTopmost_W32(name);
-        #elif defined(HAVE_COCOA)
-            return cvGetPropTopmost_COCOA(name);
         #else
             return -1;
         #endif
@@ -434,8 +424,6 @@ cv::Rect cv::getWindowImageRect(const String& winname)
         return cvGetWindowRect_W32(winname.c_str());
     #elif defined (HAVE_GTK)
         return cvGetWindowRect_GTK(winname.c_str());
-    #elif defined (HAVE_COCOA)
-        return cvGetWindowRect_COCOA(winname.c_str());
     #elif defined (HAVE_WAYLAND)
         return cvGetWindowRect_WAYLAND(winname.c_str());
     #else
@@ -615,8 +603,6 @@ void cv::setWindowTitle(const String& winname, const String& title)
     return setWindowTitle_GTK(winname, title);
 #elif defined (HAVE_QT)
     return setWindowTitle_QT(winname, title);
-#elif defined (HAVE_COCOA)
-    return setWindowTitle_COCOA(winname, title);
 #elif defined (HAVE_WAYLAND)
     return setWindowTitle_WAYLAND(winname, title);
 #else
@@ -1111,8 +1097,6 @@ const std::string cv::currentUIFramework()
     CV_Assert(false); // backend-compatible
 #elif defined (HAVE_QT)
     return std::string("QT");
-#elif defined (HAVE_COCOA)
-    return std::string("COCOA");
 #elif defined (HAVE_WAYLAND)
     return std::string("WAYLAND");
 #endif
@@ -1257,7 +1241,6 @@ int cv::createButton(const String&, ButtonCallback, void*, int , bool )
 
 #if   defined (HAVE_WIN32UI)  // see window_w32.cpp
 #elif defined (HAVE_GTK)      // see window_gtk.cpp
-#elif defined (HAVE_COCOA)    // see window_cocoa.mm
 #elif defined (HAVE_QT)       // see window_QT.cpp
 #elif defined (HAVE_WAYLAND)  // see window_wayland.cpp
 #elif defined (WINRT) && !defined (WINRT_8_0) // see window_winrt.cpp
