From 55f833c021696ec47d3b6c4cbee5ef07cf3fe120 Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Mon, 21 Jul 2025 01:12:30 +0800
Subject: [PATCH 17/31] os_bsd.cpp: do not use set_native_thread_name on ppc
 for now

---
 hotspot/src/os/bsd/vm/os_bsd.cpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/hotspot/src/os/bsd/vm/os_bsd.cpp b/hotspot/src/os/bsd/vm/os_bsd.cpp
index cf4055d6a7..fc96428a45 100644
--- a/hotspot/src/os/bsd/vm/os_bsd.cpp
+++ b/hotspot/src/os/bsd/vm/os_bsd.cpp
@@ -3573,7 +3573,8 @@ int os::active_processor_count() {
 }
 
 void os::set_native_thread_name(const char *name) {
-#if defined(__APPLE__) && (MAC_OS_X_VERSION_MIN_REQUIRED >= 1050)
+// TODO: verify this actually does not work and try to fix.
+#if defined(__APPLE__) && (MAC_OS_X_VERSION_MIN_REQUIRED >= 1050) && !defined(__ppc__)
   // This is only supported in Snow Leopard and beyond
   if (name != NULL) {
     // Add a "Java: " prefix to the name
@@ -3581,6 +3582,8 @@ void os::set_native_thread_name(const char *name) {
     snprintf(buf, sizeof(buf), "Java: %s", name);
     pthread_setname_np(buf);
   }
+#else
+  return;
 #endif
 }
 
-- 
2.24.3 (Apple Git-128)

