From 2d5eec2d77d572620252b4a609fddadb0541253e Mon Sep 17 00:00:00 2001
From: Sergey Fedorov <vital.had@gmail.com>
Date: Mon, 21 Jul 2025 00:35:06 +0800
Subject: [PATCH 15/31] Define __private_extern__ if undefined

---
 jdk/src/java.base/unix/native/libjava/io_util_md.c      | 4 ++++
 jdk/src/java.base/unix/native/libnet/Inet6AddressImpl.c | 5 +++++
 2 files changed, 9 insertions(+)

diff --git a/jdk/src/java.base/unix/native/libjava/io_util_md.c b/jdk/src/java.base/unix/native/libjava/io_util_md.c
index f1e34bbbf7..4c0c765bb4 100644
--- a/jdk/src/java.base/unix/native/libjava/io_util_md.c
+++ b/jdk/src/java.base/unix/native/libjava/io_util_md.c
@@ -40,6 +40,10 @@
 
 #ifdef MACOSX
 
+#if defined(__GNUC__) && !defined(__private_extern__)
+#define __private_extern__ __attribute__((visibility("hidden")))
+#endif
+
 #include <CoreFoundation/CoreFoundation.h>
 
 __private_extern__
diff --git a/jdk/src/java.base/unix/native/libnet/Inet6AddressImpl.c b/jdk/src/java.base/unix/native/libnet/Inet6AddressImpl.c
index 15f984ebd3..bf1239ef41 100644
--- a/jdk/src/java.base/unix/native/libnet/Inet6AddressImpl.c
+++ b/jdk/src/java.base/unix/native/libnet/Inet6AddressImpl.c
@@ -111,6 +111,11 @@ Java_java_net_Inet6AddressImpl_getLocalHostName(JNIEnv *env, jobject this) {
 }
 
 #ifdef MACOSX
+
+#if defined(__GNUC__) && !defined(__private_extern__)
+#define __private_extern__ __attribute__((visibility("hidden")))
+#endif
+
 /* also called from Inet4AddressImpl.c */
 __private_extern__ jobjectArray
 lookupIfLocalhost(JNIEnv *env, const char *hostname, jboolean includeV6)
-- 
2.24.3 (Apple Git-128)

