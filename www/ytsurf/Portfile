# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        Stan-breaks ytsurf 3.1.3 v
revision            0
epoch               1
categories          www multimedia
platforms           any
license             GPL-3
maintainers         {@barracuda156 macos-powerpc.org:barracuda} openmaintainer
description         Shell script to search and play YouTube videos
long_description    Simple shell script to search YouTube videos from your terminal \
                    and play them with mpv
checksums           rmd160  41f1492de7e4f40356be8e0389e5237b4e9465ff \
                    sha256  ab7f508b073bdf3c6507522e6c2a497b4b626cbb5742ceb8bee661263462543e \
                    size    27231
github.tarball_from archive
supported_archs     noarch

depends_run-append  port:bash \
                    port:chafa \
                    path:libexec/gnubin/sha256sum:coreutils \
                    port:curl \
                    path:bin/ffmpeg:ffmpeg \
                    port:jq \
                    path:bin/mpv:mpv \
                    path:bin/perl:perl5 \
                    port:sentaku \
                    port:yt-dlp

use_configure       no
build               { }
destroot {
    xinstall -m 775 ${worksrcpath}/ytsurf.sh ${destroot}${prefix}/bin/ytsurf
}

# See: https://github.com/Stan-breaks/ytsurf/issues/13
notes "
    Add gnubin to the path:\
    `export PATH=${prefix}/libexec/gnubin:\$PATH`\
    \
    And run the app as `ytsurf --sentaku`.\
    \
    Consider also editing config file in ~/.config/ytsurf.

    Streaming videos may have issues on legacy systems.\
    However, searching and downloading works fine.
"
