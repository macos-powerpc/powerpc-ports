# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           legacysupport 1.1
PortGroup           meson 1.0

# strnlen
legacysupport.newest_darwin_requires_legacy 10

github.setup        aaeioua jumpdf 1.1.0 v
revision            0
categories          office
maintainers         {@barracuda156 macos-powerpc.org:barracuda} openmaintainer
license             MIT
description         keyboard-focused PDF viewer
long_description    Jumpdf is a {*}${description}.

checksums           rmd160  d520010f69fd2a7f912ca0b67e639a0f281bfe4f \
                    sha256  27967e814f981bcfbd67d2f1a67506ebc5d3e1e9671005c903daa6b0f853f15d \
                    size    282318
github.tarball_from archive

depends_build-append \
                    port:gettext \
                    path:bin/pkg-config:pkgconfig

# Keep desktop-file-utils as a libdep here.
depends_lib-append  port:desktop-file-utils \
                    port:gettext-runtime \
                    path:lib/pkgconfig/gtk4.pc:gtk4 \
                    path:lib/pkgconfig/poppler.pc:poppler \
                    port:sqlite3

# app.h:8: error: redefinition of typedef ‘App’
compiler.c_standard 2011

post-activate {
    system "${prefix}/bin/update-desktop-database ${prefix}/share/applications"
}

# https://trac.macports.org/ticket/70137
notes "
If you get an error upon launching the app,\
set GSK_RENDERER=cairo in the environment.\
You may also add it into a shell config file.
"
