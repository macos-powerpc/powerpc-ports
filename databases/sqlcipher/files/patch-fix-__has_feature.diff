--- src/sqlcipher.c	2025-08-01 23:43:28.000000000 +0800
+++ src/sqlcipher.c	2025-09-23 04:51:01.000000000 +0800
@@ -397,7 +397,7 @@
   }
   #endif
 #elif defined(__APPLE__)
-  #if defined(__has_feature) && __has_feature(address_sanitizer)
+  #if defined(__clang__)
   static void sqlcipher_cleanup_destructor(void) __attribute__((destructor));
   static void sqlcipher_cleanup_destructor(void) { sqlcipher_fini(); }
   #else
